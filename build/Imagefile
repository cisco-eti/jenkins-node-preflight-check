FROM sre-go-sre-go-helloworld.git.git:base as base-build

FROM containers.cisco.com/eti-sre/sre-golang-docker:latest

COPY --from=base-build \
    /go/src/wwwin-github.cisco.com/eti/sre-go-sre-go-helloworld.git.git/sre-go-sre-go-helloworld.git.git \
    /usr/bin/sre-go-sre-go-helloworld.git.git

COPY --from=base-build \
    /go/src/wwwin-github.cisco.com/eti/sre-go-sre-go-helloworld.git.git/web \
    /web

COPY --from=base-build \
    /go/src/wwwin-github.cisco.com/eti/sre-go-sre-go-helloworld.git.git/s3_object.txt \
    /s3_object.txt

EXPOSE 5000

ENTRYPOINT ["/usr/bin/sre-go-sre-go-helloworld.git.git"]
